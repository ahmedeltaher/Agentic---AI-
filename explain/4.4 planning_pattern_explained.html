<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>شرح Planning Pattern في Agentic AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .card-title {
            color: #2c3e50;
            font-size: 1.8rem;
            margin-bottom: 20px;
            border-bottom: 3px solid #9b59b6;
            padding-bottom: 10px;
        }

        .card-content {
            line-height: 1.8;
            color: #333;
            font-size: 1.1rem;
        }

        .code-card {
            background: #2c3e50;
            color: #ecf0f1;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            direction: ltr;
            text-align: left;
        }

        .code-card pre {
            overflow-x: auto;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .highlight {
            background: linear-gradient(120deg, #e17055 0%, #fdcb6e 100%);
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        .process-step {
            background: #f8f9fa;
            border-left: 5px solid #9b59b6;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
        }

        .important-note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .important-note::before {
            content: "💡 ";
            font-size: 1.5rem;
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .example-item {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #27ae60;
        }

        .arabic-text {
            direction: rtl;
            text-align: right;
        }

        .ltr-text {
            direction: ltr;
            text-align: left;
        }

        .planning-pyramid {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .pyramid-level {
            background: rgba(255,255,255,0.2);
            margin: 10px auto;
            padding: 15px;
            border-radius: 10px;
            max-width: 80%;
            backdrop-filter: blur(10px);
        }

        .pyramid-level:nth-child(1) { max-width: 90%; }
        .pyramid-level:nth-child(2) { max-width: 75%; }
        .pyramid-level:nth-child(3) { max-width: 60%; }
        .pyramid-level:nth-child(4) { max-width: 45%; }

        .workflow-diagram {
            background: #6c5ce7;
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .workflow-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }

        .workflow-step {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            min-width: 120px;
            flex: 1;
        }

        .arrow-down {
            font-size: 2rem;
            color: #fdcb6e;
            text-align: center;
            margin: 10px 0;
        }

        .pattern-integration {
            background: #00b894;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .pattern-integration h3 {
            margin-bottom: 15px;
            text-align: center;
        }

        .patterns-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .pattern-item {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .planning-benefits {
            background: #fd79a8;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .planning-benefits ul {
            margin: 15px 0;
            padding-right: 20px;
        }

        .planning-benefits li {
            margin: 10px 0;
            font-size: 1.1rem;
        }

        .goal-breakdown {
            background: #a29bfe;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .breakdown-tree {
            margin: 15px 0;
            font-family: monospace;
            line-height: 1.8;
        }

        .tree-level-1 { padding-right: 20px; }
        .tree-level-2 { padding-right: 40px; }
        .tree-level-3 { padding-right: 60px; }

        .complexity-indicator {
            background: linear-gradient(45deg, #ff7675, #e84393);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📋 شرح Planning Pattern في Agentic AI</h1>
            <p>نمط التخطيط وتقسيم الأهداف المعقدة لمهام قابلة للتنفيذ</p>
        </div>

        <div class="card">
            <h2 class="card-title">🎯 إيه هو Planning Pattern؟</h2>
            <div class="card-content arabic-text">
                <p>تخيل إنك عايز تبني بيت من الصفر. مش هتقدر تعمل ده في خطوة واحدة، صح؟ هتحتاج تقسم المشروع لمراحل: تصميم، حفر الأساس، بناء الحوائط، السقف، التشطيب، وهكذا.</p>
                
                <br>
                
                <p>ده بالضبط اللي بيحصل في Planning Pattern! لما يكون عندنا <span class="highlight">هدف معقد</span>، الـ LLM بيقسمه لأهداف فرعية أصغر، وكل هدف فرعي بيتقسم لمهام، والمهام دي بتتنفذ كـ workflow منظم.</p>
                
                <br>
                
                <p>النمط ده بيستخدم <span class="highlight">كل الأنماط التانية</span> اللي اتكلمنا عليها قبل كده: Router، Reflection، Tool Use، وحتى Multi-agent interactions!</p>

                <div class="complexity-indicator">
                    <h3>🔥 ليه محتاجين Planning؟</h3>
                    <p><strong>الأهداف المعقدة محتاجة تفكيك وتنظيم علشان نقدر ننفذها بطريقة منطقية ومنظمة</strong></p>
                </div>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">🏗️ هيكل التخطيط في Agentic AI</h2>
            <div class="card-content arabic-text">
                <div class="planning-pyramid">
                    <h3>🏔️ هرم التخطيط</h3>
                    <div class="pyramid-level">
                        <strong>🎯 الهدف الرئيسي (Main Goal)</strong>
                        <p>الهدف الكبير اللي عايزين نحققه</p>
                    </div>
                    <div class="arrow-down">⬇️</div>
                    <div class="pyramid-level">
                        <strong>🎪 الأهداف الفرعية (Sub-Goals)</strong>
                        <p>تقسيم الهدف الكبير لأجزاء أصغر</p>
                    </div>
                    <div class="arrow-down">⬇️</div>
                    <div class="pyramid-level">
                        <strong>📋 المهام (Tasks)</strong>
                        <p>الأعمال المحددة المطلوب تنفيذها</p>
                    </div>
                    <div class="arrow-down">⬇️</div>
                    <div class="pyramid-level">
                        <strong>🔧 المهام الفرعية (Sub-Tasks)</strong>
                        <p>الخطوات التفصيلية القابلة للتنفيذ</p>
                    </div>
                </div>

                <div class="goal-breakdown">
                    <h3>🌳 مثال: بناء متجر إلكتروني</h3>
                    <div class="breakdown-tree">
                        <div class="tree-level-1">🎯 <strong>الهدف:</strong> بناء متجر إلكتروني متكامل</div>
                        <div class="tree-level-2">├── 🎪 <strong>تصميم واجهة المستخدم</strong></div>
                        <div class="tree-level-3">│   ├── 📋 تصميم الصفحة الرئيسية</div>
                        <div class="tree-level-3">│   ├── 📋 تصميم صفحات المنتجات</div>
                        <div class="tree-level-3">│   └── 📋 تصميم عملية الدفع</div>
                        <div class="tree-level-2">├── 🎪 <strong>تطوير Backend</strong></div>
                        <div class="tree-level-3">│   ├── 📋 إنشاء قاعدة البيانات</div>
                        <div class="tree-level-3">│   ├── 📋 تطوير APIs</div>
                        <div class="tree-level-3">│   └── 📋 نظام إدارة المستخدمين</div>
                        <div class="tree-level-2">└── 🎪 <strong>التكامل والاختبار</strong></div>
                        <div class="tree-level-3">    ├── 📋 ربط Frontend بـ Backend</div>
                        <div class="tree-level-3">    ├── 📋 اختبار الوظائف</div>
                        <div class="tree-level-3">    └── 📋 نشر الموقع</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">⚙️ إزاي بيشتغل Planning Pattern؟</h2>
            <div class="card-content arabic-text">
                <div class="workflow-diagram">
                    <h3>🔄 سير العمل الكامل</h3>
                    <div class="workflow-steps">
                        <div class="workflow-step">
                            <strong>1. تحليل الهدف</strong>
                            <p>الـ LLM يفهم الهدف المطلوب</p>
                        </div>
                        <div style="font-size: 1.5rem; color: #fdcb6e;">➡️</div>
                        <div class="workflow-step">
                            <strong>2. تقسيم الأهداف</strong>
                            <p>تفكيك لأهداف فرعية</p>
                        </div>
                        <div style="font-size: 1.5rem; color: #fdcb6e;">➡️</div>
                        <div class="workflow-step">
                            <strong>3. تحديد المهام</strong>
                            <p>تحويل الأهداف لمهام محددة</p>
                        </div>
                        <div style="font-size: 1.5rem; color: #fdcb6e;">➡️</div>
                        <div class="workflow-step">
                            <strong>4. ربط الأدوات</strong>
                            <p>ربط كل مهمة بالأدوات المناسبة</p>
                        </div>
                        <div style="font-size: 1.5rem; color: #fdcb6e;">➡️</div>
                        <div class="workflow-step">
                            <strong>5. تنفيذ Workflow</strong>
                            <p>تنفيذ المهام بالترتيب المحدد</p>
                        </div>
                    </div>
                </div>

                <div class="process-step">
                    <strong>خطوة 1:</strong> الـ LLM يحلل الهدف الرئيسي ويفهم متطلباته
                </div>

                <div class="process-step">
                    <strong>خطوة 2:</strong> يقسم الهدف لأهداف فرعية أصغر وأبسط
                </div>

                <div class="process-step">
                    <strong>خطوة 3:</strong> يحول كل هدف فرعي لمجموعة مهام محددة
                </div>

                <div class="process-step">
                    <strong>خطوة 4:</strong> يربط كل مهمة بالأدوات والموارد المتاحة
                </div>

                <div class="process-step">
                    <strong>خطوة 5:</strong> يحدد ترتيب تنفيذ المهام والتبعيات بينها
                </div>

                <div class="process-step">
                    <strong>خطوة 6:</strong> ينفذ المهام كـ workflow منظم
                </div>

                <div class="important-note">
                    <strong>نقطة مهمة:</strong> مخرجات كل مهمة بتبقى مدخلات للمهمة اللي بعدها، وده بيخلي العملية متسلسلة ومنطقية!
                </div>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">🤝 تكامل Planning مع الأنماط التانية</h2>
            <div class="card-content arabic-text">
                <p>Planning Pattern مش بيشتغل لوحده، ده بيستخدم كل الأنماط اللي اتكلمنا عليها:</p>

                <div class="pattern-integration">
                    <h3>🔗 التكامل مع الأنماط المختلفة</h3>
                    <div class="patterns-grid">
                        <div class="pattern-item">
                            <strong>🚦 Router Pattern</strong>
                            <p>لاختيار المسار المناسب لكل مهمة</p>
                        </div>
                        <div class="pattern-item">
                            <strong>🛠️ Tool Use Pattern</strong>
                            <p>لتنفيذ المهام باستخدام الأدوات</p>
                        </div>
                        <div class="pattern-item">
                            <strong>🔍 Reflection Pattern</strong>
                            <p>لمراجعة وتحسين الخطة</p>
                        </div>
                        <div class="pattern-item">
                            <strong>👥 Multi-Agent</strong>
                            <p>لتوزيع المهام على agents مختلفة</p>
                        </div>
                    </div>
                </div>

                <div class="examples-grid">
                    <div class="example-item">
                        <strong>🎯 مرحلة التخطيط</strong>
                        <p>Planning يقسم الهدف لمهام</p>
                    </div>
                    <div class="example-item">
                        <strong>🚦 مرحلة التوجيه</strong>
                        <p>Router يختار طريق كل مهمة</p>
                    </div>
                    <div class="example-item">
                        <strong>🛠️ مرحلة التنفيذ</strong>
                        <p>Tool Use ينفذ المهام</p>
                    </div>
                    <div class="example-item">
                        <strong>🔍 مرحلة المراجعة</strong>
                        <p>Reflection يراجع النتائج</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">💻 مثال بالكود: مخطط مشروع البرمجيات</h2>
            <div class="card-content arabic-text">
                <p>ده مثال عملي على استخدام Planning Pattern لتخطيط مشروع تطوير تطبيق:</p>
            </div>
            
            <div class="code-card">
                <pre>
class ProjectPlanningAgent:
    def __init__(self):
        self.llm = LLM()
        self.available_tools = {
            "code_generator": CodeGeneratorTool(),
            "database_designer": DatabaseDesignTool(),
            "ui_designer": UIDesignTool(),
            "tester": TestingTool(),
            "deployment": DeploymentTool()
        }
        
        # Available patterns for task execution
        self.execution_patterns = {
            "router": RouterPattern(),
            "tool_use": ToolUsePattern(),
            "reflection": ReflectionPattern()
        }
    
    def create_project_plan(self, project_goal, requirements):
        """
        Main planning method that breaks down project goal
        """
        print(f"🎯 Main Goal: {project_goal}")
        
        # Step 1: Analyze the goal and break it down
        plan_analysis = self.llm.analyze_and_plan(
            goal=project_goal,
            requirements=requirements,
            available_tools=self.available_tools
        )
        
        # Step 2: Create hierarchical plan structure
        project_plan = self.create_plan_hierarchy(plan_analysis)
        
        # Step 3: Map tasks to tools and patterns
        execution_plan = self.map_tasks_to_execution(project_plan)
        
        # Step 4: Create workflow with dependencies
        workflow = self.create_workflow(execution_plan)
        
        return workflow
    
    def create_plan_hierarchy(self, analysis):
        """
        Create hierarchical breakdown of the project
        """
        plan_structure = {
            "main_goal": analysis.main_goal,
            "sub_goals": [],
            "estimated_duration": analysis.estimated_duration
        }
        
        for sub_goal in analysis.sub_goals:
            sub_goal_structure = {
                "name": sub_goal.name,
                "description": sub_goal.description,
                "tasks": [],
                "priority": sub_goal.priority
            }
            
            # Break down sub-goal into tasks
            for task in sub_goal.tasks:
                task_structure = {
                    "name": task.name,
                    "description": task.description,
                    "subtasks": task.subtasks,
                    "required_tools": task.required_tools,
                    "dependencies": task.dependencies,
                    "estimated_time": task.estimated_time
                }
                sub_goal_structure["tasks"].append(task_structure)
            
            plan_structure["sub_goals"].append(sub_goal_structure)
        
        return plan_structure
    
    def map_tasks_to_execution(self, plan):
        """
        Map each task to appropriate tools and execution patterns
        """
        execution_plan = []
        
        for sub_goal in plan["sub_goals"]:
            for task in sub_goal["tasks"]:
                execution_step = {
                    "task": task,
                    "execution_strategy": self.determine_execution_strategy(task),
                    "tools_needed": task["required_tools"],
                    "pattern_to_use": self.select_pattern(task)
                }
                execution_plan.append(execution_step)
        
        return execution_plan
    
    def determine_execution_strategy(self, task):
        """
        Determine how each task should be executed
        """
        task_complexity = self.llm.assess_task_complexity(task)
        
        if task_complexity.is_simple:
            return "direct_tool_use"
        elif task_complexity.needs_routing:
            return "router_pattern"
        elif task_complexity.needs_review:
            return "reflection_pattern" 
        else:
            return "combined_patterns"
    
    def select_pattern(self, task):
        """
        Select appropriate execution pattern for task
        """
        if task["name"].startswith("design"):
            return "tool_use"
        elif task["name"].startswith("review"):
            return "reflection"
        elif task["name"].startswith("choose"):
            return "router"
        else:
            return "tool_use"
    
    def create_workflow(self, execution_plan):
        """
        Create executable workflow with proper dependencies
        """
        workflow = WorkflowManager()
        
        for step in execution_plan:
            workflow.add_step(
                step_id=step["task"]["name"],
                dependencies=step["task"]["dependencies"],
                execution_function=self.create_execution_function(step),
                estimated_time=step["task"]["estimated_time"]
            )
        
        return workflow
    
    def create_execution_function(self, step):
        """
        Create executable function for each step
        """
        def execute_step():
            print(f"Executing: {step['task']['name']}")
            
            pattern = self.execution_patterns[step["pattern_to_use"]]
            tools = [self.available_tools[tool] for tool in step["tools_needed"]]
            
            result = pattern.execute(
                task=step["task"],
                tools=tools
            )
            
            print(f"Completed: {step['task']['name']}")
            return result
        
        return execute_step
    
    def execute_plan(self, workflow):
        """
        Execute the complete project plan
        """
        print("🚀 Starting project execution...")
        
        results = {}
        
        # Execute workflow in dependency order
        while not workflow.is_complete():
            # Get next ready tasks (dependencies satisfied)
            ready_tasks = workflow.get_ready_tasks()
            
            for task in ready_tasks:
                print(f"\n📋 Executing task: {task.name}")
                
                try:
                    # Execute task
                    result = task.execute()
                    results[task.name] = result
                    
                    # Mark as completed
                    workflow.mark_completed(task.name)
                    
                    print(f"✅ Task completed: {task.name}")
                    
                except Exception as e:
                    print(f"❌ Task failed: {task.name} - {str(e)}")
                    
                    # Use reflection pattern to analyze failure
                    failure_analysis = self.execution_patterns["reflection"].analyze_failure(
                        task=task,
                        error=e
                    )
                    
                    # Retry with improved approach
                    if failure_analysis.can_retry:
                        print(f"🔄 Retrying task with improved approach...")
                        # Implement retry logic here
        
        print("🎉 Project execution completed!")
        return results

# Example usage
agent = ProjectPlanningAgent()

project_goal = "Build a complete e-commerce web application with user authentication, product catalog, shopping cart, and payment processing"

requirements = {
    "technology_stack": "React, Node.js, MongoDB",
    "target_audience": "Small businesses",
    "timeline": "3 months",
    "budget": "Medium",
    "features": [
        "User registration and login",
        "Product browsing and search",
        "Shopping cart functionality", 
        "Payment integration",
        "Order management",
        "Admin dashboard"
    ]
}

# Create the plan
workflow = agent.create_project_plan(project_goal, requirements)

# Execute the plan
results = agent.execute_plan(workflow)

print("Final Results:", results)
                </pre>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">💻 مثال تطبيقي: تخطيط حملة تسويقية</h2>
            <div class="card-content arabic-text">
                <p>مثال آخر يوضح استخدام Planning Pattern في مجال مختلف:</p>
            </div>
            
            <div class="code-card">
                <pre>
class MarketingCampaignPlanner:
    def __init__(self):
        self.llm = LLM()
        self.marketing_tools = {
            "market_research": MarketResearchTool(),
            "content_creator": ContentCreationTool(),
            "social_media": SocialMediaTool(),
            "email_marketing": EmailMarketingTool(),
            "analytics": AnalyticsTool(),
            "ad_platform": AdvertisingTool()
        }
    
    def plan_campaign(self, campaign_objective, target_audience, budget):
        """
        Plan a complete marketing campaign
        """
        print(f"🎯 Campaign Objective: {campaign_objective}")
        
        # Step 1: Break down campaign into phases
        campaign_plan = self.llm.create_campaign_breakdown(
            objective=campaign_objective,
            audience=target_audience,
            budget=budget,
            available_tools=self.marketing_tools
        )
        
        # Step 2: Create detailed execution plan
        execution_phases = []
        
        # Phase 1: Research and Strategy
        research_phase = {
            "name": "Research and Strategy",
            "tasks": [
                {
                    "name": "market_analysis",
                    "tool": "market_research",
                    "parameters": {
                        "target_audience": target_audience,
                        "competitors": "auto_detect",
                        "market_size": "estimate"
                    },
                    "pattern": "tool_use"
                },
                {
                    "name": "strategy_development", 
                    "tool": "content_creator",
                    "parameters": {
                        "campaign_type": "strategy_document",
                        "based_on": "market_analysis_results"
                    },
                    "pattern": "reflection",
                    "dependencies": ["market_analysis"]
                }
            ]
        }
        
        # Phase 2: Content Creation
        content_phase = {
            "name": "Content Creation",
            "tasks": [
                {
                    "name": "create_visual_content",
                    "tool": "content_creator",
                    "parameters": {
                        "content_type": "visual",
                        "brand_guidelines": "extract_from_strategy",
                        "quantity": 10
                    },
                    "pattern": "tool_use",
                    "dependencies": ["strategy_development"]
                },
                {
                    "name": "create_written_content",
                    "tool": "content_creator", 
                    "parameters": {
                        "content_type": "text",
                        "tone": "extract_from_strategy",
                        "platforms": ["social", "email", "ads"]
                    },
                    "pattern": "tool_use",
                    "dependencies": ["strategy_development"]
                },
                {
                    "name": "review_content",
                    "tool": "content_creator",
                    "parameters": {
                        "review_type": "quality_check",
                        "content_items": "all_created_content"
                    },
                    "pattern": "reflection",
                    "dependencies": ["create_visual_content", "create_written_content"]
                }
            ]
        }
        
        # Phase 3: Campaign Launch
        launch_phase = {
            "name": "Campaign Launch",
            "tasks": [
                {
                    "name": "setup_social_media",
                    "tool": "social_media",
                    "parameters": {
                        "platforms": ["facebook", "instagram", "twitter"],
                        "content": "approved_content",
                        "schedule": "auto_optimize"
                    },
                    "pattern": "tool_use",
                    "dependencies": ["review_content"]
                },
                {
                    "name": "setup_email_campaign",
                    "tool": "email_marketing",
                    "parameters": {
                        "email_list": target_audience["email_segment"],
                        "content": "approved_email_content",
                        "automation": True
                    },
                    "pattern": "tool_use", 
                    "dependencies": ["review_content"]
                },
                {
                    "name": "launch_paid_ads",
                    "tool": "ad_platform",
                    "parameters": {
                        "budget_allocation": budget,
                        "target_audience": target_audience,
                        "ad_content": "approved_ad_content"
                    },
                    "pattern": "tool_use",
                    "dependencies": ["review_content"]
                }
            ]
        }
        
        # Phase 4: Monitoring and Optimization
        optimization_phase = {
            "name": "Monitoring and Optimization",
            "tasks": [
                {
                    "name": "track_performance",
                    "tool": "analytics",
                    "parameters": {
                        "metrics": ["reach", "engagement", "conversions"],
                        "frequency": "daily",
                        "platforms": "all_active"
                    },
                    "pattern": "tool_use",
                    "dependencies": ["setup_social_media", "setup_email_campaign", "launch_paid_ads"],
                    "is_continuous": True
                },
                {
                    "name": "optimize_campaign",
                    "tool": "ad_platform",
                    "parameters": {
                        "optimization_type": "performance_based",
                        "data_source": "analytics_results"
                    },
                    "pattern": "reflection",
                    "dependencies": ["track_performance"],
                    "is_continuous": True
                }
            ]
        }
        
        execution_phases = [research_phase, content_phase, launch_phase, optimization_phase]
        
        return {
            "campaign_plan": campaign_plan,
            "execution_phases": execution_phases,
            "estimated_timeline": self.calculate_timeline(execution_phases),
            "success_metrics": self.define_success_metrics(campaign_objective)
        }
    
    def execute_campaign_phase(self, phase):
        """
        Execute a specific campaign phase
        """
        print(f"\n🚀 Executing Phase: {phase['name']}")
        
        phase_results = {}
        
        for task in phase["tasks"]:
            if self.check_dependencies_met(task, phase_results):
                print(f"  📋 Executing task: {task['name']}")
                
                # Execute based on pattern
                if task["pattern"] == "tool_use":
                    result = self.execute_tool_use(task)
                elif task["pattern"] == "reflection":
                    result = self.execute_with_reflection(task, phase_results)
                elif task["pattern"] == "router":
                    result = self.execute_with_routing(task)
                
                phase_results[task["name"]] = result
                print(f"  ✅ Completed: {task['name']}")
            else:
                print(f"  ⏳ Waiting for dependencies: {task['name']}")
        
        return phase_results
    
    def check_dependencies_met(self, task, completed_results):
        """
        Check if task dependencies are satisfied
        """
        if "dependencies" not in task:
            return True
        
        for dependency in task["dependencies"]:
            if dependency not in completed_results:
                return False
        
        return True
    
    def execute_tool_use(self, task):
        # Implementation for tool use pattern
        tool = self.marketing_tools[task["tool"]]
        return tool.execute(task["parameters"])
    
    def execute_with_reflection(self, task, previous_results):
        # Implementation with reflection pattern
        tool = self.marketing_tools[task["tool"]]
        
        # First execution
        initial_result = tool.execute(task["parameters"])
        
        # Review and improve
        review = self.llm.review_marketing_output(
            result=initial_result,
            task=task,
            context=previous_results
        )
        
        if review.needs_improvement:
            improved_result = tool.improve(initial_result, review.suggestions)
            return improved_result
        
        return initial_result
    
    def calculate_timeline(self, phases):
        # Calculate estimated timeline for campaign
        total_days = 0
        for phase in phases:
            phase_time = len(phase["tasks"]) * 2  # 2 days per task average
            total_days += phase_time
        
        return f"{total_days} days"
    
    def define_success_metrics(self, objective):
        # Define metrics based on campaign objective
        return {
            "awareness": ["reach", "impressions", "brand_mentions"],
            "engagement": ["likes", "shares", "comments", "email_opens"],
            "conversion": ["clicks", "sign_ups", "purchases"],
            "roi": ["cost_per_acquisition", "return_on_ad_spend"]
        }

# Example usage
planner = MarketingCampaignPlanner()

campaign_objective = "Increase brand awareness and drive sales for new product launch"
target_audience = {
    "age_range": "25-45",
    "interests": ["technology", "lifestyle"],
    "location": "urban_areas",
    "email_segment": "tech_enthusiasts"
}
budget = {"total": 50000, "currency": "USD"}

# Create campaign plan
campaign = planner.plan_campaign(campaign_objective, target_audience, budget)

# Execute each phase
for phase in campaign["execution_phases"]:
    results = planner.execute_campaign_phase(phase)
    print(f"Phase '{phase['name']}' completed with results: {results}")

print("\n🎉 Campaign planning and execution completed!")
print(f"Timeline: {campaign['estimated_timeline']}")
print(f"Success Metrics: {campaign['success_metrics']}")
                </pre>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">🌟 فوائد Planning Pattern</h2>
            <div class="card-content arabic-text">
                <div class="planning-benefits">
                    <h3>🚀 المزايا الرئيسية:</h3>
                    <ul>
                        <li>🎯 <strong>تعامل مع الأهداف المعقدة:</strong> يقدر يتعامل مع مشاريع كبيرة ومعقدة</li>
                        <li>📋 <strong>تنظيم منطقي:</strong> يقسم العمل بطريقة منطقية ومنظمة</li>
                        <li>🔄 <strong>إدارة التبعيات:</strong> يفهم ويدير العلاقات بين المهام المختلفة</li>
                        <li>⚡ <strong>تحسين الكفاءة:</strong> يوزع الموارد بطريقة مثلى</li>
                        <li>🎪 <strong>مرونة في التنفيذ:</strong> يقدر يتكيف مع التغييرات أثناء التنفيذ</li>
                        <li>🔍 <strong>رؤية شاملة:</strong> يعطي صورة كاملة عن المشروع ومراحله</li>
                    </ul>
                </div>

                <div class="important-note">
                    <strong>الاستخدامات الشائعة:</strong> إدارة المشاريع، تطوير البرمجيات، التخطيط التسويقي، الأبحاث المعقدة، وتنسيق الأعمال متعددة المراحل.
                </div>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">🔧 نصائح للتطبيق الناجح</h2>
            <div class="card-content arabic-text">
                <div class="important-note">
                    <strong>تحديد واضح للأهداف:</strong> لازم الهدف الرئيسي يكون واضح ومحدد علشان التقسيم يكون دقيق.
                </div>

                <p><strong>🎯 تقسيم منطقي:</strong> اتأكد إن كل مستوى من التقسيم منطقي وقابل للتنفيذ.</p>
                
                <br>
                
                <p><strong>🔗 إدارة التبعيات:</strong> حدد بوضوح أي مهمة محتاجة نتائج مهمة تانية.</p>
                
                <br>
                
                <p><strong>📊 مرونة في التخطيط:</strong> خلي الخطة قابلة للتعديل لما تحتاج تغيير في المسار.</p>
                
                <br>
                
                <p><strong>🔍 مراقبة مستمرة:</strong> استخدم Reflection Pattern لمراجعة التقدم وتحسين الخطة.</p>
                
                <br>
                
                <p><strong>⚖️ توازن بين التفصيل والبساطة:</strong> ما تفرط في التفاصيل لدرجة تعقد التنفيذ.</p>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">✅ الخلاصة</h2>
            <div class="card-content arabic-text">
                <p>Planning Pattern هو النمط اللي بيخلي Agentic AI قادر على التعامل مع الأهداف المعقدة والمشاريع الكبيرة بطريقة منظمة وفعالة.</p>
                
                <br>
                
                <p><strong>الفكرة الأساسية:</strong> أي هدف معقد يمكن تقسيمه لأجزاء أصغر وأبسط، وكل جزء يمكن تنفيذه باستخدام الأنماط المناسبة.</p>
                
                <div class="workflow-diagram">
                    <h3>🎯 العملية في جملة واحدة:</h3>
                    <p style="text-align: center; font-size: 1.2rem;"><strong>حلل الهدف ← قسمه لأجزاء ← ربط كل جزء بأدوات ← نفذ بترتيب منطقي ← راجع وحسن</strong></p>
                </div>
                
                <div class="important-note">
                    <strong>المفتاح للنجاح:</strong> تحليل دقيق + تقسيم منطقي + إدارة التبعيات + تنفيذ منظم = نجاح أي مشروع معقد!
                </div>
            </div>
        </div>
    </div>
</body>
</html>
